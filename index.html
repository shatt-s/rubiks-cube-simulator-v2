<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="modules/p5.min.js"></script>
    <script src="modules/p5.sound.min.js"></script>
    <script src="modules/p5.easycam.js"></script>
    <script src="modules/p5.clickable.js"></script>
    
    <link rel="stylesheet" href="https://pyscript.net/releases/2023.12.1/core.css">
    <script type="module" src="https://pyscript.net/releases/2023.12.1/core.js"></script>

    <py-config type="json">
      {
        "packages": ["scikit-learn", "joblib", "numpy"],
        "files": [
          {
            "from": "./data/model.dump"
          }
        ]
      }
    </py-config>
    
    <link rel="stylesheet" type="text/css" href="style.css">
    <meta charset="utf-8" />
  </head>
  <body>
    <py-script>
      import warnings
      from joblib import load

      import numpy as np
      from sklearn.ensemble import HistGradientBoostingClassifier
      from sklearn.model_selection import train_test_split, KFold, GridSearchCV
      from sklearn.pipeline import make_pipeline
      from sklearn.preprocessing import PolynomialFeatures

      warnings.simplefilter('ignore', UserWarning)

      model = load('./data/model.dump')

      def predict(fields):
        arr = np.array(list(fields)).reshape(1, -1)
        return model.predict(arr)[0]
    </py-script>
    <script type="module">
      import { config, hooks } from "https://pyscript.net/releases/2023.12.1/core.js"
      hooks.onInterpreterReady.add((wrap, element) => {
          window.pyInterpreter = wrap.interpreter
      })
    </script>
    <script src="sketch.js"></script>
  </body>
</html>
